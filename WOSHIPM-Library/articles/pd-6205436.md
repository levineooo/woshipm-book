# 商品券后价产品设计方案
{% hint style="info" %}
**Category:** Pd
**Author:** [pemg的笔记](https://www.woshipm.com/u/73701)
**Published:** 2025-04-17  
**Stats:** 👁️ 1649 views | 💬 0 comments | ⭐ 6 collects
**Tags:** 优惠券,经验分享,设计方案
**Original:** [View on woshipm.com](https://www.woshipm.com/pd/6205436.html)
{% endhint %}
> 如何设计一套高效、准确且稳定的券后价计算系统，是电商产品设计中的关键挑战之一。本文详细介绍了商品券后价的产品设计方案，从背景目标、功能设计、系统实现逻辑到异常处理机制等多个方面进行了全面阐述。

---

## 商品券后价产品设计方案

[![](https://static.woshipm.com/view/woshipm_api_def_20250403120201_9633.jpg?imageView2/1/w/72/h/72/q/100)](https://www.woshipm.com/u/73701)[pemg的笔记](https://www.woshipm.com/u/73701) ![](https://static.woshipm.com/tag/1101_1@2x.png) 关注2025-04-170 评论 1649 浏览 6 收藏 10 分钟

> 如何设计一套高效、准确且稳定的券后价计算系统，是电商产品设计中的关键挑战之一。本文详细介绍了商品券后价的产品设计方案，从背景目标、功能设计、系统实现逻辑到异常处理机制等多个方面进行了全面阐述。

![](https://image.woshipm.com/2023/04/14/b6f2a022-daa1-11ed-aaf8-00163e0b5ff3.png)

## 一、背景及目标

### 1.1 背景

在电商系统中，券后价是一个很重要的促单环节。券后价能够有效提升用户体验，促进用户购买行为，所以券后价是一个很重要的促单工具

### 1.2 目标

设计一套可通过实时计算和动态展示券后价，用户能够清晰了解优惠信息，从而提高转化率和销售额。同时，系统的处理机制需确保券后价计算的准确性和稳定性。

## 二、功能设计与实现方案

### 2.1 券后价的计算公式

**1\. 公式：**券后价 = 商品原价（或活动价） – 最优优惠金额

**2\. 要点说明：**

*   活动价：需考虑会员价，限时折扣、会员折扣等叠加活动
*   最优优惠金额：优惠金额可以是单张优惠券的金额，也可以是多张优惠券叠加后的总金额

**3\. 逻辑说明：**

*   门槛：需满足券的使用条件（如满减门槛、品类限制、时间有效性等）。
*   若商品原价不满足优惠券门槛，券后价仍显示原价。
*   若满足门槛，券后价直接展示原价减优惠券面额后的价格。

**4\. 示例：**

*   商品原价 100 元，用户持有满 100 元减 20 元优惠券 → 券后价 80 元。
*   若商品原价 90 元，使用同一张券 → 券后价仍为 90 元（不满足门槛）

### 2.2 基础计算逻辑（仅一张优惠券）

1\. 若仅一张优惠券且满足条件

2\. 券后价 = 原价 – 优惠券抵扣金额

3\. 示例：原价100元，优惠券满100减20 → 券后价80元

### 2.3 多张优惠券时的计算逻辑

**1\. 可叠加优惠券，如平台券+店铺券**

1）叠加条件：

需符合规则，如允许店铺券+平台券叠加，但需排除互斥券

2）计算方式：

券后价 = 原价 –  优惠券1抵扣金额  –   优惠券2抵扣金额

示例：商品原价为200元，有两张优惠券同时可叠加使用，券A（满100减20）和券B（满150减30），券后价为：200−20−30=150元

3）叠加优先级：

优先级为：平台券 > 店铺券 > 商品券（具体可按自己平台优先级）

系统实现：通过接口校验优惠券的可叠加标识字段，动态计算最优组合

**2\. 不可叠加优惠券，如互斥券或系统限制：**

1）选择最优券：系统自动选择最优券，即取优惠力度最大的券

取数逻辑：计算所有可用券的抵扣金额，取最大值。如：优惠券A减30元 vs 优惠券B减25元 → 选A

2）计算方式：

*   券后价 = 原价 – 最优券抵扣金额
*   示例：商品价100元，券A（满100减20）、券B（满100减15），选择券A，券后价=80元

### 2.4 优惠券有门槛时的处理

**1\. 规则：**

满足门槛：优惠券生效，直接抵扣。

未满足门槛：券后价 = 原价，但需提示用户“需凑单达XX元可用”（如“券后价 150 元，需凑单满 200 元可用”）。

**2\. 计算逻辑：**

1) 单商品：

若商品原价 ≥ 优惠券门槛 → 券后价 = 原价 – 抵扣金额

否则 → 券后价 = 原价

2) 购物车多商品：

*   总金额 ≥ 门槛 → 总券后价 = 总原价 – 抵扣金额
*   否则 → 券后价 = 总金额，提示用户“需凑单达XX元可用”
*   示例：商品A原价100元，商品B原价80元，优惠券满200减30 → 券后价180元（未达标），需凑单20元可用券。

**3\. 跨商品合并计算：**

在购物车/结算页，用户需凑单满足门槛后，按比例分摊优惠至单个商品。

## 三、系统实现逻辑

### 3.1 核心流程

用户访问详情页 → 系统查询用户可用券 → 过滤满足门槛的券 → 按优先级/叠加规则计算最优价格 → 返回券后价。

### 3.2 核心模块设计

**1\. 优惠券中心：**

管理优惠券元数据：如存储优惠券类型、门槛、适用范围、有效期、叠加规则等

**2\. 商品中心：**

提供商品原价、活动价、品类、店铺等信息

**3\. 计算引擎：**

*   输入：商品价格、用户优惠券列表、商品属性、活动规则等信息。
*   输出：最优券后价及优惠券组合

**4\. 缓存层：**

*   使用Redis缓存高频商品的券后价，减少数据库压力。
*   存储用户可用券、预计算结果

**5\. 前端展示层：**

*   通过接口实时获取券后价，结合样式高亮（如“券后¥XX”）

### 3.3 计算场景与策略

**1\. 商品列表页**

预计算 + 缓存：基于商品原价和优惠券，提前计算并缓存结果（需缓存用户可用券信息）

计算方式：可采用异步任务预计算

**2\. 商品详情页**

实时计算：结合用户当前可用券，实时计算最优价格（调用优惠中心接口）

计算方式：实时接口调用

**3\. 购物车页**

动态计算：根据购物车内已选商品总价和优惠券门槛/组合，实时计算更新

计算方式：动态接口调用

**4\. 兜底策略：**

超时或计算失败时，前端默认展示原价并提示“优惠信息加载中”

### 3.4 流程示例

1\. 用户访问商品详情页 → 前端请求券后价接口，携带用户ID、商品ID。

2\. 计算引擎查询用户可用优惠券，过滤出满足门槛的券。

3\. 按优先级选择最优券，返回券后价。

### 3.5 异常处理机制

**1\. 价格计算为负数**

处理逻辑：如计算结果低于0（负数），券后价按0元计算 或 限制最低价为0元并提示“系统检测到异常优惠，已自动修正”，系统需记录日志

**2\. 价格计算低于成本价**

处理逻辑：如计算结果低于成本价，系统需记录日志并通知商家处理

**3\. 计算服务超时**

处理逻辑：降级展示原价，并记录日志告警。

## 四. 案例说明

### 案例1：多券叠加场景

商品：原价200元，参与限时折扣（8折 → 160元）。

**优惠券：**

*   券A：满150减30（可叠加）
*   券B：满200减50（不可叠加）

**计算：**

*   叠加券A：160 -30 = 130元
*   选择券B：160（未达标200元门槛）

→ 最终券后价130元

### 案例2：不可叠加场景

商品：原价300元

**优惠券：**

*   券A：满 200 减 50（不可叠加）
*   券B：满 300 打 7 折（不可叠加）

**计算：**

*   券A：300 – 50 = 250 元
*   券B：300 × 0.7 = 210 元

→  最终券后价 210 元

## 五、设计思路（很重要）

首先在做券后价计算公式时，需分两个层面考虑：商品价格取值，如会员价，活动价；优惠券取值：如门槛，多张优惠券处理。接下来是多张优惠券的情况。这时候需要考虑优惠券的优先级。

然后考虑计算量，商品列表、详情页、购物车都需要显示券后价，所以系统需要高效计算

最后需要检查是否有遗漏的点，比如优惠券优先级，如店铺券优先于平台券，或者面额大的优先。另外，门槛计算是否需要考虑商品是否参与活动，比如某些商品可能不参与满减。这些细节都要考虑到方案中，确保全面覆盖用户需

基于以上的思考方式，输出一份最佳的产品解决方案

作者：pemg的笔记 公众号：pemg的笔记

本文由 @pemg的笔记 原创发布于人人都是产品经理。未经作者许可，禁止转载

题图来自Unsplash，基于CC0协议

该文观点仅代表作者本人，人人都是产品经理平台仅提供信息存储空间服务

赞赏 收藏已收藏 点赞已赞更多精彩内容，请关注人人都是产品经理微信公众号或下载App

[优惠券](https://www.woshipm.com/tag/%e4%bc%98%e6%83%a0%e5%88%b8)[经验分享](https://www.woshipm.com/tag/%e7%bb%8f%e9%aa%8c%e5%88%86%e4%ba%ab)[设计方案](https://www.woshipm.com/tag/%e8%ae%be%e8%ae%a1%e6%96%b9%e6%a1%88)[分享到微博](https://service.weibo.com/share/share.php?appkey=2775287854&title=商品券后价产品设计方案&url=https://www.woshipm.com/pd/6205436.html&pic=https://image.woshipm.com/2023/04/14/b6f2a022-daa1-11ed-aaf8-00163e0b5ff3.png)微信扫一扫![微信二维码](https://api.pwmqr.com/qrcode/create/?url=https://www.woshipm.com/pd/6205436.html)分享